\documentclass[a4paper,10pt,twocolumn]{book}
\usepackage[all]{nowidow}
\usepackage{amsmath}
\usepackage{siunitx}
\usepackage{enumerate}

%\usepackage[margin=0.9in]{geometry}

\usepackage{titling}
%\setlength{\droptitle}{-0.5in} %Adjust margin above title

\usepackage{titlesec}
\titleformat{\chapter}[hang]{\normalfont\huge\bfseries}{\chaptertitlename\ \thechapter:}{1em}{} %Chapter number and name on same line
%TODO: This justifies split lines awfully, fix it.

\makeatletter
\renewcommand{\@seccntformat}[1]{} %Remove section numbers
\makeatother

\usepackage{tocloft}
\makeatletter
\renewcommand{\cftsecpresnum}{\begin{lrbox}{\@tempboxa}} %Removes section numbers from the table of contents.
\renewcommand{\cftsecaftersnum}{\end{lrbox}} %Latter half of the above.
\makeatother
\setlength{\cftsecnumwidth}{0pt} %Removes the space reserved for the section numbers in the table of contents.

\usepackage{hyperref}
\usepackage{nameref}

\usepackage{graphicx}
\usepackage{float} %Provides the float option [H] for a non-floating float.
\graphicspath{{./imgs/}}

\usepackage{hyperxmp} %Recommended for doclicense
\usepackage[
	type={CC},
	modifier={by-nc-sa},
	version={4.0},
]{doclicense}

\usepackage{booktabs}
\usepackage{tabu}
\tabulinesep=1.2mm %Space tables more nicely.
\usepackage[table]{xcolor}
\newenvironment{simpletable}[1]{
	\begin{center}
	\rowcolors{2}{}{gray!20}
	\begin{tabu}{#1}
}{
	\end{tabu}
	\end{center}
}


\newcommand\partlabel[1]{\label{part:#1}}
\newcommand\chaplabel[1]{\label{chap:#1}}
\newcommand\seclabel[1]{\label{sec:#1}}
\newcommand\partref[1]{Part~\ref{part:#1}}
\newcommand\chapref[1]{Chapter~\ref{chap:#1}}
\newcommand\chapnameref[1]{\nameref{chap:#1}}
\newcommand\secref[1]{the \nameref{sec:#1} section}
\newcommand\seclink[2]{\hyperref[sec:#2]{#1}}

\newcommand\feat[4]{ %Arguments: title, label, prerequisites, text.
	\subsection{#1}\label{feat:#2}
	\textbf{Prerequisites:} {#3}
	
	{#4}
} %TODO: XP cost, tags such as 'first circle'?
\newcommand\featref[1]{\nameref{feat:#1}}
%TODO: Make feat references add the chapter in brackets afterwards, if the feat is in a different chapter.

\newcommand\skilllabel[1]{\label{skill:#1}}
\newcommand\skillref[2][0]{%Takes two arguments, the first of which is optional and defaults to zero.
	\nameref{skill:#2}%
	\ifnum #1=0%
		%
	\else%
		~#1%
	\fi%
}
\newcommand\skillrefspecialty[3][0]{%Takes three arguments, the first of which is optional and defaults to zero.
	\nameref{skill:#2} (#3)%
	\ifnum #1=0%
		%
	\else%
		~#1%
	\fi%
}

\usepackage{amsfonts} %Gives the stuff we use to build \shortminus
\DeclareMathSymbol{\shortminus}{\mathbin}{AMSa}{"39}

\usepackage{xstring} %Gives \StrDel
\newcommand\dice[2][0]{%Takes two arguments, the first of which is optional and defaults to zero.
	#2d%
	\ifnum #1=0%
		%
	\else%
		\ifnum #1>0%
			$+$%
		\else%
			$\shortminus$%
		\fi%
		\StrDel{#1}{-}%Strips the minus from it, essentially giving absolute value.
	\fi%
}

\newcommand\negative[1]{$\shortminus$#1}

\newcommand\titleemph[1]{\emph{#1}} %For the titles of books and such, including Coven itself.

\newcommand\storybreak{\bigskip}

\title{Coven: An RPG of Witches}
\author{Christopher Brown}
\date{}

\begin{document}
\pagestyle{plain} %Fixes page numbers appearing in the top left on empty pages.

\maketitle

\include{edition-notice}

\setcounter{tocdepth}{1} %No subsections or deeper.
\tableofcontents

\include{introduction}

\part{Character Creation}
\partlabel{character-creation}

\include{character-creation-guide}

\include{attributes-and-skills}

\include{familiars}

\include{equipment}

\part{Playing the Game}
\partlabel{rules}

\include{general-rules}

\part{Disciplines of Witchcraft}
\partlabel{disciplines}

\include{brewing}

\include{weather-story}
\include{willing}

\include{headology}

\include{flying-story}
\include{broomcraft}

\include{sympathetic-magic}

\include{golemancy}

\end{document}
